---
layout: post
title:  "Securing frontend user's API requests to backend system"
author: vishesh gupta
description: A simple hashing mechanism to secure the api requests originating from frontend to backend.
---

## Problem
If you have build an API first product, then you would have faced the situation where your clients are sending their api-key in the request header and you use these sent api-keys to authenticate the client requests and track their consumption. This scheme works well when your clients use such APIs in their backend services, where these api-keys are hidden from the rest of the world, until ofcourse they manage to leak them. But usually no additional measures are needed to secure the requests.

Now, imagine a scenario where your clients are using your APIs in a front-end application with which their users interact. There can be many such use cases, but to list a few:
- you are providing llm QnA as a service, where users can send a prompt and your API responds with the answer generated by your service.
- your api allows users to mint NFT, and tokens and your clients are blockchain b2c applications that allow their users to interact with blockchains.

In both the above cases, your client is a frontend web application running inside their users' browsers. The api-key that gets sent in the request to your service is same for all your client's users. Now, in this case any end user can easily exploit your service causing disruptions and financial losses. 
<br><b>Ok, <i>But how?</i></b>

Anyone <i>(an end user of your client's frontend web application)</i> can use below steps to exploit your authentication and usage tracking:
1. open the browsers network tab.
2. make the api request to your service, by simply performing the frontend action (click, or page reload etc)
3. right click on the request that you want to exploit and copy it as cURL. 
4. open postman, paste the copied request, and send.

**Voilla!** Now anyone can write a simple bot script make keeps making these cURL requests to your service with your client's api-keys, and you will endup billing your clients for the usage. And the best part, its totally free for the attacker.

In the rest of the blog, I will tell you a simple approach using which you can avoid this scenario. 

## Solution
Now, since we understand the problem well lets look at a way to avoid this scenario. To secure the communication between our backend service and the api calls originating from the end-user's browswer,  
We will be using:
1. basics of cryptography
2. a particular handshake mechanism
3. Broswer Cookies
4. Redis for managing users' sessions

# Handshake-Mechanism




